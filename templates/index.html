<!DOCTYPE html>
<html>
<head>
    <title>二次方程式とは?</title>
</head>
<body>
    <h1>supermochiBBS</h1>
    <h2>supermochiBBSへようこそ</h2>
        <form action="/post" method="post" id="postForm">
        <div>
            <label for="name">名前：</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div>
            <label for="password">パスワード：</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div>
            <label for="text">投稿内容：</label>
            <textarea name="text" rows="4" cols="50" required maxlength="140"></textarea>
        </div>
        <button type="submit">投稿</button>
    </form>
    <hr>
    {% if error %}
    <p style="color: red;">{{ error }}</p>
    {% endif %}
    <h2>投稿一覧</h2>
    <ul>
        {% for post in posts %}
        <li>
            ID: {{ post.id }} (パスワードID: {{ post.password_id }}) -
            {{ post.created_at }} -
            <strong>{{ post.name }}</strong>:
            {{ post.text }}
        </li>
        {% endfor %}
    </ul>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const nameInput = document.getElementById('name');
            const passwordInput = document.getElementById('password');
            const postForm = document.getElementById('postForm');

            // LocalStorageから名前とパスワードを読み込んで入力欄に設定
            const savedName = localStorage.getItem('name');
            const savedPassword = localStorage.getItem('password');
            if (savedName) {
                nameInput.value = savedName;
            }
            if (savedPassword) {
                passwordInput.value = savedPassword;
            }

            // フォーム送信時に名前とパスワードをLocalStorageに保存
            postForm.addEventListener('submit', function() {
                localStorage.setItem('name', nameInput.value);
                localStorage.setItem('password', passwordInput.value);
            });
        });
    </script>
</body>
</html>
